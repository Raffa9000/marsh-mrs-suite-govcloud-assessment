<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marsh Evidence Pack Generator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <div class="header-content">
        <div class="marsh-logo">M</div>
        <div class="header-title">
          <h1>Marsh Evidence Pack Generator</h1>
          <div class="header-subtitle">Create Audit-Ready Compliance Documentation</div>
        </div>
      </div>
    </header>



    <!-- Main Layout -->
    <main class="main-layout">
      <!-- Left Pane: Pack Configuration -->
      <aside class="left-pane">
        <!-- Section 1: Select RFP -->
        <section class="config-section">
          <h3>Select RFP</h3>
          <label class="form-label">Choose RFP to generate evidence pack</label>
          <select id="rfpSelect" class="form-control" onchange="selectRFP()">
            <option value="">-- Select an RFP --</option>
            <option value="1">VA Medical Center - Phoenix — Federal — MRS: 4.9</option>
            <option value="2">Federal Student Aid Office — Federal — MRS: 4.3</option>
            <option value="3">CMS Medicare Portal — Federal — MRS: 4.5</option>
          </select>
          <div id="rfpBasicInfo" class="rfp-basic-info hidden"></div>
        </section>

        <!-- Section 2: Evidence Pack Scope -->
        <section class="config-section">
          <h3>Evidence Pack Scope</h3>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="scope_assessment" checked>
              <span>RFP Assessment Data</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="scope_mrs" checked>
              <span>MRS Scoring Breakdown</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="scope_gap" checked>
              <span>Compliance Gap Analysis</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="scope_controls" checked>
              <span>Control Mappings</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="scope_audit" checked>
              <span>Audit Trail</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="scope_decision" checked>
              <span>Decision Memo</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="scope_approvals" checked>
              <span>Approvals &amp; Sign-Offs</span>
            </label>
          </div>
        </section>

        <!-- Section 3: Export Format -->
        <section class="config-section">
          <h3>Export Format</h3>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="exportFormat" value="pdf" checked>
              <span><strong>PDF Report</strong><br><small>Professional, printable, single document</small></span>
            </label>
            <label class="radio-label">
              <input type="radio" name="exportFormat" value="zip">
              <span><strong>ZIP Archive</strong><br><small>Complete package: PDF + CSV + JSON</small></span>
            </label>
            <label class="radio-label">
              <input type="radio" name="exportFormat" value="ppt">
              <span><strong>PowerPoint Deck</strong><br><small>Leadership brief with slides</small></span>
            </label>
            <label class="radio-label">
              <input type="radio" name="exportFormat" value="sharepoint">
              <span><strong>SharePoint Export</strong><br><small>Folder structure ready for upload</small></span>
            </label>
          </div>
        </section>

        <!-- Section 4: Regulatory Framework -->
        <section class="config-section">
          <h3>Regulatory Framework</h3>
          <label class="form-label">Primary regulatory framework</label>
          <select id="frameworkSelect" class="form-control">
            <option value="fedramp">FedRAMP Moderate/High</option>
            <option value="nist">NIST 800-53 (General)</option>
            <option value="cms">CMS ARS/AR-CAMP</option>
            <option value="soc2">SOC 2 Type II</option>
            <option value="cmmc">CMMC Level [1/2/3]</option>
            <option value="general">General Compliance</option>
          </select>
        </section>

        <!-- Section 5: Include Metadata -->
        <section class="config-section">
          <h3>Include Metadata</h3>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="meta_hash" checked>
              <span>File hash &amp; integrity signature</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="meta_extraction" checked>
              <span>Extraction method &amp; confidence scores</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="meta_llm">
              <span>LLM extraction logs</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="meta_assessor" checked>
              <span>Assessor contact info &amp; timestamps</span>
            </label>
          </div>
        </section>

        <!-- Section 6: Actions -->
        <section class="config-section">
          <h3>Actions</h3>
          <button class="btn btn--primary btn--full-width btn--lg" onclick="generateEvidencePack()" id="generateBtn" disabled>Generate Evidence Pack</button>
          <button class="btn btn--secondary btn--full-width" style="margin-top: 8px;" onclick="previewPack()">Preview</button>
          <button class="btn btn--secondary btn--full-width" style="margin-top: 8px;" onclick="saveConfig()">Save Configuration</button>
        </section>
      </aside>

      <!-- Center Pane: Evidence Pack Preview -->
      <div class="center-pane">
        <h2>Evidence Pack Preview</h2>
        <div id="packPreview" class="pack-preview">
          <div class="preview-placeholder">
            <p>Select an RFP to preview evidence pack structure</p>
          </div>
        </div>
      </div>

      <!-- Right Pane: Generation & Export -->
      <aside class="right-pane" id="rightPane">
        <div class="generation-panel">
          <h3>Generate &amp; Export</h3>
          
          <div id="generationStatus" class="generation-status hidden">
            <div class="progress-steps">
              <div class="progress-step" id="step1">
                <span class="step-icon">⏳</span>
                <span class="step-text">Aggregating MRS scores...</span>
                <span class="step-check hidden">✓</span>
              </div>
              <div class="progress-step" id="step2">
                <span class="step-icon">⏳</span>
                <span class="step-text">Compiling control mappings...</span>
                <span class="step-check hidden">✓</span>
              </div>
              <div class="progress-step" id="step3">
                <span class="step-icon">⏳</span>
                <span class="step-text">Building decision narrative...</span>
                <span class="step-check hidden">✓</span>
              </div>
              <div class="progress-step" id="step4">
                <span class="step-icon">⏳</span>
                <span class="step-text">Formatting PDF...</span>
                <span class="step-check hidden">✓</span>
              </div>
              <div class="progress-step" id="step5">
                <span class="step-icon">⏳</span>
                <span class="step-text">Packaging files...</span>
                <span class="step-check hidden">✓</span>
              </div>
            </div>
            <div class="estimated-time">Estimated time: &lt; 30 seconds</div>
          </div>

          <div id="generationSuccess" class="generation-success hidden">
            <div class="success-header">✓ Evidence Pack Generated Successfully</div>
            <div class="success-details">
              <div class="detail-row">
                <span class="detail-label">Package:</span>
                <span class="detail-value" id="packageName"></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Size:</span>
                <span class="detail-value" id="packageSize"></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Generated:</span>
                <span class="detail-value" id="packageTime"></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Hash:</span>
                <span class="detail-value" id="packageHash" style="font-family: monospace; font-size: 11px;"></span>
              </div>
            </div>

            <div class="export-actions">
              <button class="btn btn--primary btn--full-width" id="downloadBtn" onclick="downloadPack()">Download Package</button>
              <button class="btn btn--secondary btn--full-width" style="margin-top: 8px;" onclick="uploadToSharePoint()">Upload to SharePoint</button>
              <button class="btn btn--secondary btn--full-width" style="margin-top: 8px;" onclick="copyToAuditBoard()">Copy to AuditBoard</button>
            </div>
          </div>

          <div id="previousPacks" class="previous-packs hidden">
            <h4>Previously Generated Packs</h4>
            <div id="packsList" class="packs-list"></div>
          </div>
        </div>
      </aside>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      &copy; Open Source | Marsh-inspired branding | Not affiliated with Marsh McLennan | Licensed MIT/Apache 2.0 | v8.0 Evidence Pack Generator
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>