<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise RFP Analysis Suite - AI-Powered Response Generator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header with Navigation -->
        <header class="app-header">
            <div class="header-left">
                <h1>ğŸš€ Enterprise RFP Suite</h1>
                <p>AI-Powered RFP Analysis, Response Generation & Compliance Management</p>
            </div>
            <nav class="header-nav">
                <button class="nav-btn active" onclick="switchView('dashboard')">ğŸ“Š Dashboard</button>
                <button class="nav-btn" onclick="switchView('analyzer')">ğŸ” Analyzer</button>
                <button class="nav-btn" onclick="switchView('library')">ğŸ“š RFP Library</button>
                <button class="nav-btn" onclick="switchView('team')">ğŸ‘¥ Team</button>
                <button class="nav-btn" onclick="switchView('settings')">âš™ï¸ Settings</button>
            </nav>
            <div class="header-stats">
                <div class="stat-card">
                    <div class="stat-label">RFPs Analyzed</div>
                    <div class="stat-value" id="totalRFPs">12</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Responses Generated</div>
                    <div class="stat-value" id="totalResponses">247</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Completion Rate</div>
                    <div class="stat-value" id="completionRate">78%</div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view active">
                <div class="grid-2col">
                    <section class="section">
                        <h2>ğŸ“ˆ RFP Analysis Pipeline</h2>
                        <canvas id="pipelineChart"></canvas>
                    </section>
                    <section class="section">
                        <h2>ğŸ¯ Response Quality Metrics</h2>
                        <canvas id="qualityChart"></canvas>
                    </section>
                </div>

                <section class="section">
                    <h2>ğŸ”„ Recent Activity</h2>
                    <table class="activity-table">
                        <thead>
                            <tr>
                                <th>RFP Name</th>
                                <th>Status</th>
                                <th>Questions</th>
                                <th>Responses</th>
                                <th>Owner</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="activityTable"></tbody>
                    </table>
                </section>

                <div class="grid-3col">
                    <section class="section">
                        <h2>âš¡ Quick Stats</h2>
                        <div class="stat-list" id="quickStats"></div>
                    </section>
                    <section class="section">
                        <h2>ğŸ† Top Frameworks</h2>
                        <div class="framework-list" id="frameworkList"></div>
                    </section>
                    <section class="section">
                        <h2>âš ï¸ Priority Items</h2>
                        <div class="priority-list" id="priorityList"></div>
                    </section>
                </div>
            </div>

            <!-- Analyzer View -->
            <div id="analyzer-view" class="view">
                <div class="analyzer-layout">
                    <!-- Left Sidebar -->
                    <aside class="sidebar">
                        <section class="form-section">
                            <h3>ğŸ“¤ Load RFP</h3>
                            <select id="rfpSelect" onchange="loadSampleRFP()" class="form-input">
                                <option value="">-- Choose Sample RFP --</option>
                                <option value="va-medical">VA Medical Center - Phoenix</option>
                                <option value="dod-modernization">DOD IT Modernization</option>
                                <option value="cms-analytics">CMS Analytics Platform</option>
                                <option value="fbi-datacenter">FBI Data Center Consolidation</option>
                                <option value="state-dept">State Department Secure Collab</option>
                                <option value="nih-research">NIH Research Cloud</option>
                                <option value="census-bureau">Census Bureau Systems</option>
                            </select>
                            <div class="divider" style="margin: 15px 0;"></div>
                            <input type="file" id="rfpFileUpload" accept=".pdf,.txt,.docx" style="display:none;">
                            <button onclick="document.getElementById('rfpFileUpload').click()" class="btn-secondary">
                                ğŸ“ Or Upload File
                            </button>
                            <div id="uploadStatus" style="font-size: 12px; margin-top: 10px; color: #666;"></div>
                        </section>

                        <section class="form-section">
                            <h3>ğŸ“š Reference Documents</h3>
                            <div class="ref-docs-list" id="refDocsList"></div>
                            <input type="file" id="refFilesUpload" multiple accept=".pdf,.txt,.docx" style="display:none;">
                            <button onclick="document.getElementById('refFilesUpload').click()" class="btn-secondary">
                                ğŸ“ Add References
                            </button>
                        </section>

                        <section class="form-section">
                            <h3>ğŸ›ï¸ Analysis Settings</h3>
                            <label>Global Instructions</label>
                            <textarea id="globalInstructions" placeholder="e.g., Focus on HIPAA compliance, Use bullet points..." style="min-height: 80px;"></textarea>
                            
                            <label>LLM Provider</label>
                            <select id="llmProvider" class="form-input">
                                <option value="mock">ğŸ¯ Demo Mode (No API)</option>
                                <option value="openai">ğŸ”´ OpenAI GPT-4</option>
                                <option value="claude">ğŸŸ  Claude 3 (Anthropic)</option>
                            </select>

                            <label>API Key (Optional)</label>
                            <input type="password" id="apiKey" placeholder="Leave blank for demo" class="form-input">

                            <button onclick="enterpriseRFP.extractAndAnalyze()" class="btn-primary">
                                ğŸš€ Extract & Analyze
                            </button>
                        </section>

                        <section class="form-section">
                            <h3>ğŸ“Š Batch Processing</h3>
                            <button onclick="enterpriseRFP.generateAllResponses()" class="btn-primary" style="background: #28a745;">
                                âš¡ Generate All Responses
                            </button>
                            <button onclick="enterpriseRFP.exportCompletePackage()" class="btn-secondary">
                                ğŸ“¥ Export Package
                            </button>
                        </section>
                    </aside>

                    <!-- Main Content -->
                    <main class="analyzer-main">
                        <!-- Questions Panel -->
                        <section class="section">
                            <div class="section-header">
                                <h2>ğŸ“‹ Extracted Questions (<span id="qCount">0</span>)</h2>
                                <div class="filters">
                                    <input type="text" id="filterQuestions" placeholder="Filter questions..." class="form-input" style="width: 200px; margin: 0;">
                                    <select id="categoryFilter" class="form-input" style="width: 150px;">
                                        <option value="">All Categories</option>
                                        <option value="Security & Compliance">Security</option>
                                        <option value="Data & Privacy">Data & Privacy</option>
                                        <option value="Organizational">Organizational</option>
                                        <option value="Technical Infrastructure">Technical</option>
                                        <option value="Assessment & Audit">Assessment</option>
                                    </select>
                                </div>
                            </div>
                            <div id="questionsGrid" class="questions-grid"></div>
                        </section>

                        <!-- Responses Panel -->
                        <section class="section">
                            <div class="section-header">
                                <h2>ğŸ’¬ Responses & Analysis</h2>
                                <button onclick="enterpriseRFP.toggleResponseView()" class="btn-secondary" style="width: auto;">
                                    ğŸ‘ï¸ Toggle View
                                </button>
                            </div>
                            <div id="responsesContainer" class="responses-container"></div>
                        </section>

                        <!-- Analytics -->
                        <section class="section">
                            <h2>ğŸ“Š Question Analytics</h2>
                            <div class="analytics-grid">
                                <div class="analytics-box">
                                    <strong>Categories</strong>
                                    <div id="categoryBreakdown" style="font-size: 12px; line-height: 1.8;"></div>
                                </div>
                                <div class="analytics-box">
                                    <strong>Frameworks</strong>
                                    <div id="frameworkBreakdown" style="font-size: 12px; line-height: 1.8;"></div>
                                </div>
                                <div class="analytics-box">
                                    <strong>Sentiment</strong>
                                    <div id="sentimentAnalysis" style="font-size: 12px; line-height: 1.8;"></div>
                                </div>
                                <div class="analytics-box">
                                    <strong>Keywords</strong>
                                    <div id="keywordAnalysis" style="font-size: 12px; line-height: 1.8;"></div>
                                </div>
                            </div>
                        </section>
                    </main>
                </div>
            </div>

            <!-- RFP Library View -->
            <div id="library-view" class="view">
                <section class="section">
                    <div class="section-header">
                        <h2>ğŸ“š RFP Historical Library</h2>
                        <button onclick="enterpriseRFP.showNewRFPModal()" class="btn-primary" style="width: auto;">
                            â• New RFP Project
                        </button>
                    </div>
                    <table class="library-table" id="libraryTable"></table>
                </section>
            </div>

            <!-- Team View -->
            <div id="team-view" class="view">
                <section class="section">
                    <h2>ğŸ‘¥ Team & Collaboration</h2>
                    <div class="team-grid" id="teamGrid"></div>
                </section>
                <section class="section">
                    <h2>ğŸ” Audit Trail</h2>
                    <table class="audit-table" id="auditTable"></table>
                </section>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view">
                <section class="section">
                    <h2>âš™ï¸ Enterprise Settings</h2>
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3>ğŸ”‘ API Configuration</h3>
                            <label>OpenAI API Key</label>
                            <input type="password" id="settingsOpenAIKey" placeholder="sk-..." class="form-input">
                            
                            <label>Claude API Key</label>
                            <input type="password" id="settingsClaudeKey" placeholder="sk-ant-..." class="form-input">
                            
                            <button onclick="enterpriseRFP.saveSettings()" class="btn-primary">ğŸ’¾ Save</button>
                        </div>

                        <div class="settings-card">
                            <h3>ğŸ“‹ Default Templates</h3>
                            <label>Response Template</label>
                            <textarea id="templateText" placeholder="Default response template..." style="min-height: 100px;"></textarea>
                            <button onclick="enterpriseRFP.saveTemplate()" class="btn-primary">ğŸ’¾ Save</button>
                        </div>

                        <div class="settings-card">
                            <h3>ğŸ¨ Organization Info</h3>
                            <label>Organization Name</label>
                            <input type="text" id="orgName" placeholder="Your Company Name" class="form-input">
                            
                            <label>Default Responder</label>
                            <input type="text" id="defaultResponder" placeholder="Full Name" class="form-input">
                            
                            <button onclick="enterpriseRFP.saveOrgSettings()" class="btn-primary">ğŸ’¾ Save</button>
                        </div>

                        <div class="settings-card">
                            <h3>ğŸ“Š Data & Cache</h3>
                            <button onclick="enterpriseRFP.exportAllData()" class="btn-secondary">ğŸ“¤ Export All Data</button>
                            <button onclick="enterpriseRFP.clearCache()" class="btn-secondary">ğŸ—‘ï¸ Clear Cache</button>
                            <button onclick="enterpriseRFP.loadDemoData()" class="btn-secondary">ğŸ“¥ Load Demo Data</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
