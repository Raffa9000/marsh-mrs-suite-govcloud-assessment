<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MGF  GovCloud Migration Readiness Score (MRS)</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="shell">
    <header class="topbar">
      <div class="brand">
        <img src="assets/mgf-logo.png" alt="Marsh Governance Fabric" class="brand__logo"/>
        <div class="brand__text">
          <div class="brand__title">Marsh Governance Fabric</div>
          <div class="brand__subtitle">GovCloud Migration Readiness Score (MRS)</div>
        </div>
      </div>
      <div class="topbar__actions">
        <button class="btn btn--ghost" id="helpBtn">Help</button>
        <button class="btn btn--ghost" id="runTestsBtn">Demo Data</button>
      </div>
    </header>

    <main class="layout">
      <aside class="panel">
        <div class="tabs">
          <button class="tab active" data-tab="single">Add Single RFP</button>
          <button class="tab" data-tab="batch">Upload Batch</button>
          <button class="tab" data-tab="settings">Weights & Thresholds</button>
        </div>

        <section id="tab-single" class="tabpane active">
          <form id="rfpForm" class="grid">
            <label>Opportunity Name
              <input type="text" id="oppName" placeholder="e.g., State Medicaid Modernization"/>
            </label>
            <label>Agency / Sector
              <input type="text" id="agency" placeholder="e.g., CMS / Healthcare"/>
            </label>

            <label>Compliance Requirement
              <select id="complianceReq">
                <option>FedRAMP Required</option>
                <option>CMS ARS Required</option>
                <option>NIST 800-53 Required</option>
                <option>StateRAMP</option>
                <option>IL4/IL5</option>
                <option>Compliance preferred</option>
                <option>Best practices expected</option>
                <option>None specified</option>
              </select>
            </label>

            <label>Readiness
              <select id="readiness">
                <option>Complete</option>
                <option>In Progress (>75%)</option>
                <option>In Progress (50-75%)</option>
                <option>In Progress (<50%)</option>
                <option>None</option>
                <option>Expired</option>
              </select>
            </label>

            <label>Business Value (15)
              <input type="number" id="bizValue" min="1" max="5" value="3"/>
            </label>
            <label>Operational Friction (15)
              <input type="number" id="opsFriction" min="1" max="5" value="3"/>
            </label>
            <label>Legal Flexibility (15)
              <input type="number" id="legalFlex" min="1" max="5" value="3"/>
            </label>

            <div class="form-actions">
              <button type="submit" class="btn btn--primary">Add Record</button>
              <button type="reset" class="btn btn--ghost">Clear</button>
            </div>
          </form>
        </section>

        <section id="tab-batch" class="tabpane">
          <p class="muted">Upload a CSV containing: <code>name,agency,compliance,readiness,b,o,l</code></p>
          <div class="upload">
            <input type="file" id="fileUpload" accept=".csv"/>
            <div class="upload__buttons">
              <button class="btn btn--primary" id="previewBtn">Preview</button>
              <button class="btn btn--ghost" id="confirmUploadBtn">Import</button>
            </div>
          </div>
          <div id="uploadPreview" class="tablewrap" style="display:none;">
            <table id="previewTable"></table>
          </div>
        </section>

        <section id="tab-settings" class="tabpane">
          <div class="grid">
            <label>Weight C (Compliance)
              <input type="number" id="wC" min="0" max="1" step="0.05" value="0.4"/>
            </label>
            <label>Weight R (Readiness)
              <input type="number" id="wR" min="0" max="1" step="0.05" value="0.25"/>
            </label>
            <label>Weight B (Business)
              <input type="number" id="wB" min="0" max="1" step="0.05" value="0.25"/>
            </label>
            <label>Weight O (Ops Friction)
              <input type="number" id="wO" min="0" max="1" step="0.05" value="0.1"/>
            </label>
            <label>Weight L (Legal)
              <input type="number" id="wL" min="0" max="1" step="0.05" value="0.1"/>
            </label>
          </div>

          <div class="grid grid--3">
            <label>Migrate Now 
              <input type="number" id="tNow" min="0" max="5" step="0.1" value="4.5"/>
            </label>
            <label>Migrate Soon 
              <input type="number" id="tSoon" min="0" max="5" step="0.1" value="3.5"/>
            </label>
            <label>Migrate Later 
              <input type="number" id="tLater" min="0" max="5" step="0.1" value="2.5"/>
            </label>
          </div>

          <div class="form-actions">
            <button class="btn btn--primary" id="applySettingsBtn">Apply</button>
          </div>
        </section>
      </aside>

      <section class="content">
        <div class="kpis">
          <div class="kpi"><div class="kpi__label">Total RFPs</div><div class="kpi__value" id="kpiTotal">0</div><div class="kpi__hint" id="kpiUpdated"></div></div>
          <div class="kpi"><div class="kpi__label">Avg MRS</div><div class="kpi__value" id="kpiAvgMRS">0.0</div><div class="kpi__hint">weighted C/R/B/O/L</div></div>
          <div class="kpi"><div class="kpi__label">Migrate Now</div><div class="kpi__value" id="kpiNow">0</div><div class="kpi__hint">count</div></div>
        </div>

        <div class="charts">
          <div class="card"><div class="card__title">Classification Distribution</div><canvas id="donutChart" height="140"></canvas></div>
          <div class="card"><div class="card__title">RFP Landscape (B vs MRS)</div><canvas id="scatterChart" height="140"></canvas></div>
          <div class="card"><div class="card__title">Factor Averages</div><canvas id="barChart" height="140"></canvas></div>
        </div>

        <div class="card">
          <div class="card__title">Recent RFPs</div>
          <div class="tablewrap">
            <table id="rfpTable"></table>
          </div>
        </div>
      </section>
    </main>

  </div>
  <script src="app.js"></script>
</body>
</html>
