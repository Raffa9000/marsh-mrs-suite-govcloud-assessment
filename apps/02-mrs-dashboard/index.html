<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GovCloud Migration Decision App (MRS)</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <div class="brand">
        <img class="brand-logo" src="assets/mgf-logo.png" alt="Marsh Governance Fabric logo">
        <div>
          <h1>GovCloud Migration Readiness Score (MRS)</h1>
          <div class="brand-subtitle">Marsh Governance Fabric</div>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn btn--secondary btn--sm" id="runTestsBtn">Run Tests</button>
        <button class="btn btn--secondary btn--sm" id="helpBtn">Help</button>
      </div>
    </header>

    <div class="main-layout">
      <aside class="left-pane">
        <div class="tabs">
          <button class="tab-btn active" data-tab="add-single">Add Single RFP</button>
          <button class="tab-btn" data-tab="upload-batch">Upload Batch</button>
          <button class="tab-btn" data-tab="settings">Settings</button>
        </div>

        <section id="add-single" class="tab-content active">
          <form id="rfpForm">
            <div class="form-grid">
              <label>Opportunity Name
                <input type="text" id="oppName" placeholder="e.g., State Medicaid Modernization"/>
              </label>
              <label>Agency / Sector
                <input type="text" id="agency" placeholder="e.g., CMS / Healthcare"/>
              </label>
              <label>Compliance Requirements
                <select id="complianceReq">
                  <option>FedRAMP Required</option>
                  <option>CMS ARS Required</option>
                  <option>NIST 800-53 Required</option>
                  <option>StateRAMP</option>
                  <option>IL4/IL5</option>
                  <option>Compliance preferred</option>
                  <option>Best practices expected</option>
                  <option>None specified</option>
                </select>
              </label>
              <label>Readiness
                <select id="readiness">
                  <option>Complete</option>
                  <option>In Progress (>75%)</option>
                  <option>In Progress (50-75%)</option>
                  <option>In Progress (<50%)</option>
                  <option>None</option>
                  <option>Expired</option>
                </select>
              </label>
              <label>Business Value (15)
                <input type="number" id="bizValue" min="1" max="5" value="3"/>
              </label>
              <label>Operational Friction (15)
                <input type="number" id="opsFriction" min="1" max="5" value="3"/>
              </label>
              <label>Legal Flexibility (15)
                <input type="number" id="legalFlex" min="1" max="5" value="3"/>
              </label>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn--primary">Add Record</button>
              <button type="reset" class="btn btn--secondary">Clear</button>
            </div>
          </form>
        </section>

        <section id="upload-batch" class="tab-content">
          <div class="upload-box">
            <input type="file" id="fileUpload" accept=".csv"/>
            <button class="btn btn--primary" id="previewBtn">Preview</button>
            <button class="btn btn--secondary" id="confirmUploadBtn">Import</button>
          </div>
          <div id="uploadPreview" class="table-wrapper" style="display:none;">
            <table id="previewTable"></table>
          </div>
        </section>

        <section id="settings" class="tab-content">
          <div class="settings-grid">
            <label>Weight C (Compliance)
              <input type="number" id="wC" min="0" max="1" step="0.05" value="0.4"/>
            </label>
            <label>Weight R (Readiness)
              <input type="number" id="wR" min="0" max="1" step="0.05" value="0.25"/>
            </label>
            <label>Weight B (Business)
              <input type="number" id="wB" min="0" max="1" step="0.05" value="0.25"/>
            </label>
            <label>Weight O (Ops Friction)
              <input type="number" id="wO" min="0" max="1" step="0.05" value="0.1"/>
            </label>
            <label>Weight L (Legal)
              <input type="number" id="wL" min="0" max="1" step="0.05" value="0.1"/>
            </label>
          </div>
          <div class="thresholds-grid">
            <label>Migrate Now 
              <input type="number" id="tNow" min="0" max="5" step="0.1" value="4.5"/>
            </label>
            <label>Migrate Soon 
              <input type="number" id="tSoon" min="0" max="5" step="0.1" value="3.5"/>
            </label>
            <label>Migrate Later 
              <input type="number" id="tLater" min="0" max="5" step="0.1" value="2.5"/>
            </label>
          </div>
          <div class="form-actions">
            <button class="btn btn--primary" id="applySettingsBtn">Apply</button>
          </div>
        </section>
      </aside>

      <section class="right-pane">
        <div class="kpi-row">
          <div class="kpi-card">
            <div class="kpi-title">Total RFPs</div>
            <div class="kpi-value" id="kpiTotal">0</div>
            <div class="muted" id="kpiUpdated"></div>
          </div>
          <div class="kpi-card">
            <div class="kpi-title">Avg MRS</div>
            <div class="kpi-value" id="kpiAvgMRS">0.0</div>
            <div class="muted">weighted C/R/B/O/L</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-title">Migrate Now</div>
            <div class="kpi-value" id="kpiNow">0</div>
            <div class="muted">count</div>
          </div>
        </div>

        <div class="charts-grid">
          <div class="chart-card">
            <div class="chart-title">Classifications</div>
            <canvas id="donutChart" height="160"></canvas>
          </div>
          <div class="chart-card">
            <div class="chart-title">RFP Landscape (scatter)</div>
            <canvas id="scatterChart" height="160"></canvas>
          </div>
          <div class="chart-card">
            <div class="chart-title">Factor Averages</div>
            <canvas id="barChart" height="160"></canvas>
          </div>
        </div>

        <div class="table-wrapper">
          <table id="rfpTable"></table>
        </div>
      </section>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
